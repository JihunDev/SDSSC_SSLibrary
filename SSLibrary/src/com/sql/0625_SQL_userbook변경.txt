/* Lib_User */
CREATE TABLE A_USER (
	ID VARCHAR2(20) NOT NULL, /* U_ID */
	PWD VARCHAR2(20) NOT NULL, /* PWD */
	NAME VARCHAR2(20) NOT NULL, /* NAME */
	PHONE VARCHAR2(20) NOT NULL, /* PHONE */
	IMG VARCHAR2(50), /* IMG */
	EMAIL VARCHAR2(30), /* EMAIL */
	REG_DATE DATE, /* REG_DATE */
	ISADMIN VARCHAR2(3) /* ISADMIN */
);

ALTER TABLE A_USER
	ADD
		CONSTRAINT PK_A_USER
		PRIMARY KEY (
			ID
		);

/* Lib_Book */
CREATE TABLE A_BOOK (
	ID VARCHAR2(50) NOT NULL, /* B_ID_SQ */
	NAME VARCHAR2(100) NOT NULL, /* NAME */
	WRITER VARCHAR2(50) NOT NULL, /* WRITER */
	IMG VARCHAR2(50) NOT NULL, /* IMG */
	FLOOR VARCHAR2(50) NOT NULL, /* FLOOR */
	TOTAL_QT NUMBER(5) NOT NULL, /* TOTAL_QT */
	CURRENT_QT NUMBER(5) NOT NULL, /* CURRENT_QT */
	REG_DATE DATE NOT NULL /* REG_DATE */
);

ALTER TABLE A_BOOK
	ADD
		CONSTRAINT PK_A_BOOK
		PRIMARY KEY (
			ID
		);

/* Lib_Seat */
CREATE TABLE A_SEAT (
	ID NUMBER(5) NOT NULL, /* S_ID */
	STATE VARCHAR2(20) NOT NULL /* STATE */
);

ALTER TABLE A_SEAT
	ADD
		CONSTRAINT PK_A_SEAT
		PRIMARY KEY (
			ID
		);

/* Lib_UserSeat */
CREATE TABLE A_USERSEAT (
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	S_ID NUMBER(5) NOT NULL, /* S_ID */
	START_TIME DATE NOT NULL, /* START_TIME */
	END_TIME DATE, /* END_TIME */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

ALTER TABLE A_USERSEAT
	ADD
		CONSTRAINT PK_A_USERSEAT
		PRIMARY KEY (
			U_ID,
			S_ID
		);

/* Lib_UserBook */
CREATE TABLE A_USERBOOK (
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	B_ID VARCHAR2(50) NOT NULL, /* B_ID_SQ */
	START_DATE DATE NOT NULL, /* START_DATE */
	END_DATE DATE, /* END_DATE */
	RENEW_QT NUMBER(3), /* RENEW_QT */
	ISRETURN VARCHAR2(3) NOT NULL /* ISRETURN */
);

ALTER TABLE A_USERBOOK
	ADD
		CONSTRAINT PK_A_USERBOOK
		PRIMARY KEY (
			U_ID,
			B_ID
		);

/* Lib_MessageLog */
CREATE TABLE A_MESSAGELOG (
	ID NUMBER(20) NOT NULL, /* MSG_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	S_ID NUMBER(5) NOT NULL, /* S_ID */
	SENDER_ID VARCHAR2(20) NOT NULL, /* SENDER_ID */
	TEXT VARCHAR2(1000) NOT NULL, /* TEXT */
	READ VARCHAR2(3) NOT NULL, /* READ */
	SEND_DATE DATE NOT NULL, /* SEND_DATE */
	READ_DATE DATE /* READ_DATE */
);

ALTER TABLE A_MESSAGELOG
	ADD
		CONSTRAINT PK_A_MESSAGELOG
		PRIMARY KEY (
			ID
		);

/* Lib_SeatLog */
CREATE TABLE A_SEATLOG (
	ID NUMBER(20) NOT NULL, /* SL_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	S_ID NUMBER(5) NOT NULL, /* S_ID */
	START_DATE DATE NOT NULL, /* START_DATE */
	END_DATE DATE NOT NULL, /* END_DATE */
	REAL_DATE DATE, /* REAL_DATE */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

ALTER TABLE A_SEATLOG
	ADD
		CONSTRAINT PK_A_SEATLOG
		PRIMARY KEY (
			ID
		);

/* Lib_BookLog */
CREATE TABLE A_BOOKLOG (
	ID NUMBER(20) NOT NULL, /* BL_ID_SQ */
	B_ID VARCHAR2(50) NOT NULL, /* B_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	START_DATE DATE NOT NULL, /* START_DATE */
	END_DATE DATE NOT NULL, /* END_DATE */
	REAL_DATE DATE, /* REAL_DATE */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

ALTER TABLE A_BOOKLOG
	ADD
		CONSTRAINT PK_A_BOOKLOG
		PRIMARY KEY (
			ID
		);

/* Lib_Board */
CREATE TABLE A_BOARD (
	ID NUMBER(20) NOT NULL, /* NT_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	COUNTER NUMBER(38) NOT NULL, /* COUNTER */
	TITLE VARCHAR2(100), /* TITLE */
	CONTENT VARCHAR2(1000) NOT NULL, /* CONTENT */
	REG_DATE DATE NOT NULL, /* REG_DATE */
	SORT VARCHAR2(50) NOT NULL, /* SORT */
	FILE_NAME VARCHAR2(50), /* FILE_NAME */
	REG_NUMBER NUMBER(20) /* REG_NUMBER */
);

ALTER TABLE A_BOARD
	ADD
		CONSTRAINT PK_A_BOARD
		PRIMARY KEY (
			ID
		);

ALTER TABLE A_USERSEAT
	ADD
		CONSTRAINT FK_A_USER_TO_A_USERSEAT
		FOREIGN KEY (
			U_ID
		)
		REFERENCES A_USER (
			ID
		);

ALTER TABLE A_USERSEAT
	ADD
		CONSTRAINT FK_A_SEAT_TO_A_USERSEAT
		FOREIGN KEY (
			S_ID
		)
		REFERENCES A_SEAT (
			ID
		);

ALTER TABLE A_USERBOOK
	ADD
		CONSTRAINT FK_A_USER_TO_A_USERBOOK
		FOREIGN KEY (
			U_ID
		)
		REFERENCES A_USER (
			ID
		);

ALTER TABLE A_USERBOOK
	ADD
		CONSTRAINT FK_A_BOOK_TO_A_USERBOOK
		FOREIGN KEY (
			B_ID
		)
		REFERENCES A_BOOK (
			ID
		);

ALTER TABLE A_MESSAGELOG
	ADD
		CONSTRAINT FK_A_USERSEAT_TO_A_MESSAGELOG
		FOREIGN KEY (
			U_ID,
			S_ID
		)
		REFERENCES A_USERSEAT (
			U_ID,
			S_ID
		);

ALTER TABLE A_MESSAGELOG
	ADD
		CONSTRAINT FK_A_USER_TO_A_MESSAGELOG
		FOREIGN KEY (
			SENDER_ID
		)
		REFERENCES A_USER (
			ID
		);

ALTER TABLE A_SEATLOG
	ADD
		CONSTRAINT FK_A_USER_TO_A_SEATLOG
		FOREIGN KEY (
			U_ID
		)
		REFERENCES A_USER (
			ID
		);

ALTER TABLE A_SEATLOG
	ADD
		CONSTRAINT FK_A_SEAT_TO_A_SEATLOG
		FOREIGN KEY (
			S_ID
		)
		REFERENCES A_SEAT (
			ID
		);

ALTER TABLE A_BOOKLOG
	ADD
		CONSTRAINT FK_A_USER_TO_A_BOOKLOG
		FOREIGN KEY (
			U_ID
		)
		REFERENCES A_USER (
			ID
		);

ALTER TABLE A_BOOKLOG
	ADD
		CONSTRAINT FK_A_BOOK_TO_A_BOOKLOG
		FOREIGN KEY (
			B_ID
		)
		REFERENCES A_BOOK (
			ID
		);

ALTER TABLE A_BOARD
	ADD
		CONSTRAINT FK_A_USER_TO_A_BOARD
		FOREIGN KEY (
			U_ID
		)
		REFERENCES A_USER (
			ID
		);