
--DROP
DROP TABLE A_USER;
DROP TABLE A_BOOK;
DROP TABLE A_BOOKLOG;
DROP TABLE A_MESSAGELOG;
DROP TABLE A_SEAT;
DROP TABLE A_SEATLOG;
DROP TABLE A_USERBOOK;
DROP TABLE A_USERSEAT;
DROP TABLE A_BOARD;

--DROP SQ
DROP SEQUENCE SEATLOG_SQ;
DROP SEQUENCE MESSAGELOG_SQ;
DROP SEQUENCE BOARD_SQ;
DROP SEQUENCE USERBOOK_SQ;
DROP SEQUENCE BOOK_SQ;
DROP SEQUENCE BOOKLOG_SQ;
DROP SEQUENCE SEAT_SQ;

--SELECT
SELECT * FROM A_USER;
SELECT * FROM A_BOOK;
SELECT * FROM A_BOOKLOG;
SELECT * FROM A_MESSAGELOG;
SELECT * FROM A_SEAT;
SELECT * FROM A_SEATLOG;
SELECT * FROM A_USERBOOK;
SELECT * FROM A_USERSEAT;
SELECT * FROM A_BOARD;

--CREATE SQ
CREATE SEQUENCE SEATLOG_SQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE MESSAGELOG_SQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE BOARD_SQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE USERBOOK_SQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE BOOK_SQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE BOOKLOG_SQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEAT_SQ START WITH 1 INCREMENT BY 1;

--TABLE
/* Lib_User */
CREATE TABLE A_USER (
	ID VARCHAR2(20) NOT NULL, /* U_ID */
	PWD VARCHAR2(20) NOT NULL, /* PWD */
	NAME VARCHAR2(20) NOT NULL, /* NAME */
	PHONE VARCHAR2(20) NOT NULL, /* PHONE */
	IMG VARCHAR2(50), /* IMG */
	EMAIL VARCHAR2(30), /* EMAIL */
	REG_DATE DATE, /* REG_DATE */
	STOP_DATE DATE, /* STOP_DATE */
	ISADMIN VARCHAR2(3) /* ISADMIN */
);

CREATE UNIQUE INDEX PK_A_USER
	ON A_USER (
		ID ASC
	);

/* Lib_Book */
CREATE TABLE A_BOOK (
	ID VARCHAR2(50) NOT NULL, /* B_ID_SQ */
	NAME VARCHAR2(100) NOT NULL, /* NAME */
	WRITER VARCHAR2(50) NOT NULL, /* WRITER */
	IMG VARCHAR2(50) NOT NULL, /* IMG */
	FLOOR VARCHAR2(50) NOT NULL, /* FLOOR */
	TOTAL_QT NUMBER(5) NOT NULL, /* TOTAL_QT */
	CURRENT_QT NUMBER(5) NOT NULL, /* CURRENT_QT */
	REG_DATE DATE NOT NULL /* REG_DATE */
);

CREATE UNIQUE INDEX PK_A_BOOK
	ON A_BOOK (
		ID ASC
	);

/* Lib_Seat */
CREATE TABLE A_SEAT (
	ID NUMBER(5) NOT NULL, /* S_ID */
	STATE VARCHAR2(20) NOT NULL /* STATE */
);

CREATE UNIQUE INDEX PK_A_SEAT
	ON A_SEAT (
		ID ASC
	);

/* Lib_UserSeat */
CREATE TABLE A_USERSEAT (
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	S_ID NUMBER(5) NOT NULL, /* S_ID */
	START_TIME DATE NOT NULL, /* START_TIME */
	END_TIME DATE, /* END_TIME */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

CREATE UNIQUE INDEX PK_A_USERSEAT
	ON A_USERSEAT (
		U_ID ASC,
		S_ID ASC
	);

/* Lib_UserBook */
CREATE TABLE A_USERBOOK (
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	B_ID VARCHAR2(50) NOT NULL, /* B_ID_SQ */
	ISRETURN VARCHAR2(3) NOT NULL, /* ISRETURN */
	START_DATE DATE NOT NULL, /* START_DATE */
	END_DATE DATE, /* END_DATE */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

CREATE UNIQUE INDEX PK_A_USERBOOK
	ON A_USERBOOK (
		U_ID ASC,
		B_ID ASC,
		ISRETURN ASC
	);

/* Lib_MessageLog */
CREATE TABLE A_MESSAGELOG (
	ID NUMBER(20) NOT NULL, /* MSG_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	S_ID NUMBER(5) NOT NULL, /* S_ID */
	SENDER_ID VARCHAR2(20) NOT NULL, /* SENDER_ID */
	TEXT VARCHAR2(1000) NOT NULL, /* TEXT */
	READ VARCHAR2(3) NOT NULL, /* READ */
	SEND_DATE DATE NOT NULL, /* SEND_DATE */
	READ_DATE DATE /* READ_DATE */
);

CREATE UNIQUE INDEX PK_A_MESSAGELOG
	ON A_MESSAGELOG (
		ID ASC
	);

/* Lib_SeatLog */
CREATE TABLE A_SEATLOG (
	ID NUMBER(20) NOT NULL, /* SL_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	S_ID NUMBER(5) NOT NULL, /* S_ID */
	START_DATE DATE NOT NULL, /* START_DATE */
	END_DATE DATE NOT NULL, /* END_DATE */
	REAL_DATE DATE, /* REAL_DATE */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

CREATE UNIQUE INDEX PK_A_SEATLOG
	ON A_SEATLOG (
		ID ASC
	);

/* Lib_BookLog */
CREATE TABLE A_BOOKLOG (
	ID NUMBER(20) NOT NULL, /* BL_ID_SQ */
	B_ID VARCHAR2(50) NOT NULL, /* B_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	START_DATE DATE NOT NULL, /* START_DATE */
	END_DATE DATE NOT NULL, /* END_DATE */
	REAL_DATE DATE, /* REAL_DATE */
	RENEW_QT NUMBER(3) /* RENEW_QT */
);

CREATE UNIQUE INDEX PK_A_BOOKLOG
	ON A_BOOKLOG (
		ID ASC
	);

/* Lib_Board */
CREATE TABLE A_BOARD (
	ID NUMBER(20) NOT NULL, /* NT_ID_SQ */
	U_ID VARCHAR2(20) NOT NULL, /* U_ID */
	COUNTER NUMBER(38) NOT NULL, /* COUNTER */
	TITLE VARCHAR2(100), /* TITLE */
	CONTENT VARCHAR2(1000) NOT NULL, /* CONTENT */
	REG_DATE DATE NOT NULL, /* REG_DATE */
	SORT VARCHAR2(50) NOT NULL, /* SORT */
	FILE_NAME VARCHAR2(50), /* FILE_NAME */
	REG_NUMBER NUMBER(20) /* REG_NUMBER */
);

CREATE UNIQUE INDEX PK_A_BOARD
	ON A_BOARD (
		ID ASC
	);